<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="top.buukle.provider.security.dao.UserMapper" >
  <resultMap id="BaseResultMap" type="top.buukle.provider.security.entity.User" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="username" property="username" jdbcType="VARCHAR" />
    <result column="password" property="password" jdbcType="VARCHAR" />
    <result column="user_id" property="userId" jdbcType="VARCHAR" />
    <result column="fans_number" property="fansNumber" jdbcType="VARCHAR" />
    <result column="phone" property="phone" jdbcType="VARCHAR" />
    <result column="gender" property="gender" jdbcType="VARCHAR" />
    <result column="age" property="age" jdbcType="VARCHAR" />
    <result column="slogen" property="slogen" jdbcType="VARCHAR" />
    <result column="login_strategy" property="loginStrategy" jdbcType="INTEGER" />
    <result column="head_image_url" property="headImageUrl" jdbcType="VARCHAR" />
    <result column="head_image_id" property="headImageId" jdbcType="VARCHAR" />
    <result column="theme" property="theme" jdbcType="VARCHAR" />
    <result column="theme_id" property="themeId" jdbcType="INTEGER" />
    <result column="creator" property="creator" jdbcType="VARCHAR" />
    <result column="creator_code" property="creatorCode" jdbcType="VARCHAR" />
    <result column="gmt_created" property="gmtCreated" jdbcType="TIMESTAMP" />
    <result column="modifier" property="modifier" jdbcType="VARCHAR" />
    <result column="modifier_code" property="modifierCode" jdbcType="VARCHAR" />
    <result column="gmt_modified" property="gmtModified" jdbcType="TIMESTAMP" />
    <result column="name_cn" property="nameCn" jdbcType="VARCHAR" />
    <result column="full_name_cn" property="fullNameCn" jdbcType="VARCHAR" />
    <result column="name_en" property="nameEn" jdbcType="VARCHAR" />
    <result column="full_name_en" property="fullNameEn" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="INTEGER" />
    <result column="bak01" property="bak01" jdbcType="VARCHAR" />
    <result column="bak02" property="bak02" jdbcType="VARCHAR" />
    <result column="bak03" property="bak03" jdbcType="VARCHAR" />
    <result column="bak04" property="bak04" jdbcType="VARCHAR" />
    <result column="bak05" property="bak05" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    id, username, password, user_id, fans_number, phone, gender, age, slogen, login_strategy, 
    head_image_url, head_image_id, theme, theme_id, creator, creator_code, gmt_created, 
    modifier, modifier_code, gmt_modified, name_cn, full_name_cn, name_en, full_name_en, 
    status, bak01, bak02, bak03, bak04, bak05
  </sql>
  <sql id="Base_Column_List_without_pwd" >
    id, username, user_id, fans_number, phone, gender, age, slogen, login_strategy,
    head_image_url, head_image_id, theme, theme_id, creator, creator_code, gmt_created,
    modifier, modifier_code, gmt_modified, name_cn, full_name_cn, name_en, full_name_en,
    status, bak01, bak02, bak03, bak04, bak05
  </sql>
  <sql id="Base_Column_Update" >
      <if test="username != null  and username !='' " >
          username = #{username,jdbcType=VARCHAR},
      </if>
      <if test="password != null  and password !='' " >
          password = #{password,jdbcType=VARCHAR},
      </if>
      <if test="userId != null  and userId !='' " >
          user_id = #{userId,jdbcType=VARCHAR},
      </if>
      <if test="fansNumber != null  and fansNumber !='' " >
          fans_number = #{fansNumber,jdbcType=VARCHAR},
      </if>
      <if test="phone != null  and phone !='' " >
          phone = #{phone,jdbcType=VARCHAR},
      </if>
      <if test="gender != null  and gender !='' " >
          gender = #{gender,jdbcType=VARCHAR},
      </if>
      <if test="age != null  and age !='' " >
          age = #{age,jdbcType=VARCHAR},
      </if>
      <if test="slogen != null  and slogen !='' " >
          slogen = #{slogen,jdbcType=VARCHAR},
      </if>
      <if test="loginStrategy != null  and loginStrategy !='' " >
          login_strategy = #{loginStrategy,jdbcType=INTEGER},
      </if>
      <if test="headImageUrl != null  and headImageUrl !='' " >
          head_image_url = #{headImageUrl,jdbcType=VARCHAR},
      </if>
      <if test="headImageId != null  and headImageId !='' " >
          head_image_id = #{headImageId,jdbcType=VARCHAR},
      </if>
      <if test="theme != null  and theme !='' " >
          theme = #{theme,jdbcType=VARCHAR},
      </if>
      <if test="themeId != null  and themeId !='' " >
          theme_id = #{themeId,jdbcType=INTEGER},
      </if>
      <if test="creator != null  and creator !='' " >
          creator = #{creator,jdbcType=VARCHAR},
      </if>
      <if test="creatorCode != null  and creatorCode !='' " >
          creator_code = #{creatorCode,jdbcType=VARCHAR},
      </if>
      <if test="gmtCreated != null  and gmtCreated !='' " >
          gmt_created = #{gmtCreated,jdbcType=TIMESTAMP},
      </if>
      <if test="modifier != null  and modifier !='' " >
          modifier = #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="modifierCode != null  and modifierCode !='' " >
          modifier_code = #{modifierCode,jdbcType=VARCHAR},
      </if>
      <if test="gmtModified != null  and gmtModified !='' " >
          gmt_modified = #{gmtModified,jdbcType=TIMESTAMP},
      </if>
      <if test="nameCn != null  and nameCn !='' " >
          name_cn = #{nameCn,jdbcType=VARCHAR},
      </if>
      <if test="fullNameCn != null  and fullNameCn !='' " >
          full_name_cn = #{fullNameCn,jdbcType=VARCHAR},
      </if>
      <if test="nameEn != null  and nameEn !='' " >
          name_en = #{nameEn,jdbcType=VARCHAR},
      </if>
      <if test="fullNameEn != null  and fullNameEn !='' " >
          full_name_en = #{fullNameEn,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
          status = #{status,jdbcType=INTEGER},
      </if>
      <if test="bak01 != null  and bak01 !='' " >
          bak01 = #{bak01,jdbcType=VARCHAR},
      </if>
      <if test="bak02 != null  and bak02 !='' " >
          bak02 = #{bak02,jdbcType=VARCHAR},
      </if>
      <if test="bak03 != null  and bak03 !='' " >
          bak03 = #{bak03,jdbcType=VARCHAR},
      </if>
      <if test="bak04 != null  and bak04 !='' " >
          bak04 = #{bak04,jdbcType=VARCHAR},
      </if>
      <if test="bak05 != null  and bak05 !='' " >
          bak05 = #{bak05,jdbcType=VARCHAR},
      </if>
      id = #{id,jdbcType=INTEGER}
  </sql>
  <sql id="Base_Column_where" >
    <if test="id != null  and id !='' " >
      and id = #{id}
    </if>
    <if test="username != null  and username !='' " >
      and username = #{username}
    </if>
    <if test="password != null  and password !='' " >
      and password = #{password}
    </if>
    <if test="userId != null  and userId !='' " >
      and user_id = #{userId}
    </if>
    <if test="fansNumber != null  and fansNumber !='' " >
      and fans_number = #{fansNumber}
    </if>
    <if test="phone != null  and phone !='' " >
      and phone = #{phone}
    </if>
    <if test="gender != null  and gender !='' " >
      and gender = #{gender}
    </if>
    <if test="age != null  and age !='' " >
      and age = #{age}
    </if>
    <if test="slogen != null  and slogen !='' " >
      and slogen = #{slogen}
    </if>
    <if test="loginStrategy != null  and loginStrategy !='' " >
      and login_strategy = #{loginStrategy}
    </if>
    <if test="headImageUrl != null  and headImageUrl !='' " >
      and head_image_url = #{headImageUrl}
    </if>
    <if test="headImageId != null  and headImageId !='' " >
      and head_image_id = #{headImageId}
    </if>
    <if test="theme != null  and theme !='' " >
      and theme = #{theme}
    </if>
    <if test="themeId != null  and themeId !='' " >
      and theme_id = #{themeId}
    </if>
    <if test="creator != null  and creator !='' " >
      and creator = #{creator}
    </if>
    <if test="creatorCode != null  and creatorCode !='' " >
      and creator_code = #{creatorCode}
    </if>
    <if test="gmtCreated != null  and gmtCreated !='' " >
      and gmt_created >= #{gmtCreated}
    </if>
    <if test="modifier != null  and modifier !='' " >
      and modifier = #{modifier}
    </if>
    <if test="modifierCode != null  and modifierCode !='' " >
      and modifier_code = #{modifierCode}
    </if>
    <if test="gmtModified != null  and gmtModified !='' " >
      and gmt_modified = #{gmtModified}
    </if>
    <if test="nameCn != null  and nameCn !='' " >
      and name_cn = #{nameCn}
    </if>
    <if test="fullNameCn != null  and fullNameCn !='' " >
      and full_name_cn = #{fullNameCn}
    </if>
    <if test="nameEn != null  and nameEn !='' " >
      and name_en = #{nameEn}
    </if>
    <if test="fullNameEn != null and fullNameEn !='' " >
      and full_name_en = #{fullNameEn}
    </if>
    <if test="status != null" >
      and status = #{status}
    </if>
    <if test="bak01 != null  and bak01 !='' " >
      and bak01 = #{bak01}
    </if>
    <if test="bak02 != null  and bak02 !='' " >
      and bak02 = #{bak02}
    </if>
    <if test="bak03 != null  and bak03 !='' " >
      and bak03 = #{bak03}
    </if>
    <if test="bak04 != null  and bak04 !='' " >
      and bak04 = #{bak04}
    </if>
    <if test="bak05 != null  and bak05 !='' " >
      and bak05 = #{bak05}
    </if>
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    select 
    <include refid="Base_Column_List_without_pwd" />
    from user
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    delete from user
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="top.buukle.provider.security.entity.User" >
    insert into user (id, username, password, 
      user_id, fans_number, phone, 
      gender, age, slogen, 
      login_strategy, head_image_url, head_image_id, 
      theme, theme_id, creator, 
      creator_code, gmt_created, modifier, 
      modifier_code, gmt_modified, name_cn, 
      full_name_cn, name_en, full_name_en, 
      status, bak01, bak02, 
      bak03, bak04, bak05
      )
    values (#{id,jdbcType=INTEGER}, #{username,jdbcType=VARCHAR}, #{password,jdbcType=VARCHAR}, 
      #{userId,jdbcType=VARCHAR}, #{fansNumber,jdbcType=VARCHAR}, #{phone,jdbcType=VARCHAR}, 
      #{gender,jdbcType=VARCHAR}, #{age,jdbcType=VARCHAR}, #{slogen,jdbcType=VARCHAR}, 
      #{loginStrategy,jdbcType=INTEGER}, #{headImageUrl,jdbcType=VARCHAR}, #{headImageId,jdbcType=VARCHAR}, 
      #{theme,jdbcType=VARCHAR}, #{themeId,jdbcType=INTEGER}, #{creator,jdbcType=VARCHAR}, 
      #{creatorCode,jdbcType=VARCHAR}, #{gmtCreated,jdbcType=TIMESTAMP}, #{modifier,jdbcType=VARCHAR}, 
      #{modifierCode,jdbcType=VARCHAR}, #{gmtModified,jdbcType=TIMESTAMP}, #{nameCn,jdbcType=VARCHAR}, 
      #{fullNameCn,jdbcType=VARCHAR}, #{nameEn,jdbcType=VARCHAR}, #{fullNameEn,jdbcType=VARCHAR}, 
      #{status,jdbcType=INTEGER}, #{bak01,jdbcType=VARCHAR}, #{bak02,jdbcType=VARCHAR}, 
      #{bak03,jdbcType=VARCHAR}, #{bak04,jdbcType=VARCHAR}, #{bak05,jdbcType=VARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="top.buukle.provider.security.entity.User" >
    insert into user
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="username != null" >
        username,
      </if>
      <if test="password != null" >
        password,
      </if>
      <if test="userId != null" >
        user_id,
      </if>
      <if test="fansNumber != null" >
        fans_number,
      </if>
      <if test="phone != null" >
        phone,
      </if>
      <if test="gender != null" >
        gender,
      </if>
      <if test="age != null" >
        age,
      </if>
      <if test="slogen != null" >
        slogen,
      </if>
      <if test="loginStrategy != null" >
        login_strategy,
      </if>
      <if test="headImageUrl != null" >
        head_image_url,
      </if>
      <if test="headImageId != null" >
        head_image_id,
      </if>
      <if test="theme != null" >
        theme,
      </if>
      <if test="themeId != null" >
        theme_id,
      </if>
      <if test="creator != null" >
        creator,
      </if>
      <if test="creatorCode != null" >
        creator_code,
      </if>
      <if test="gmtCreated != null" >
        gmt_created,
      </if>
      <if test="modifier != null" >
        modifier,
      </if>
      <if test="modifierCode != null" >
        modifier_code,
      </if>
      <if test="gmtModified != null" >
        gmt_modified,
      </if>
      <if test="nameCn != null" >
        name_cn,
      </if>
      <if test="fullNameCn != null" >
        full_name_cn,
      </if>
      <if test="nameEn != null" >
        name_en,
      </if>
      <if test="fullNameEn != null" >
        full_name_en,
      </if>
      <if test="status != null" >
        status,
      </if>
      <if test="bak01 != null" >
        bak01,
      </if>
      <if test="bak02 != null" >
        bak02,
      </if>
      <if test="bak03 != null" >
        bak03,
      </if>
      <if test="bak04 != null" >
        bak04,
      </if>
      <if test="bak05 != null" >
        bak05,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="username != null" >
        #{username,jdbcType=VARCHAR},
      </if>
      <if test="password != null" >
        #{password,jdbcType=VARCHAR},
      </if>
      <if test="userId != null" >
        #{userId,jdbcType=VARCHAR},
      </if>
      <if test="fansNumber != null" >
        #{fansNumber,jdbcType=VARCHAR},
      </if>
      <if test="phone != null" >
        #{phone,jdbcType=VARCHAR},
      </if>
      <if test="gender != null" >
        #{gender,jdbcType=VARCHAR},
      </if>
      <if test="age != null" >
        #{age,jdbcType=VARCHAR},
      </if>
      <if test="slogen != null" >
        #{slogen,jdbcType=VARCHAR},
      </if>
      <if test="loginStrategy != null" >
        #{loginStrategy,jdbcType=INTEGER},
      </if>
      <if test="headImageUrl != null" >
        #{headImageUrl,jdbcType=VARCHAR},
      </if>
      <if test="headImageId != null" >
        #{headImageId,jdbcType=VARCHAR},
      </if>
      <if test="theme != null" >
        #{theme,jdbcType=VARCHAR},
      </if>
      <if test="themeId != null" >
        #{themeId,jdbcType=INTEGER},
      </if>
      <if test="creator != null" >
        #{creator,jdbcType=VARCHAR},
      </if>
      <if test="creatorCode != null" >
        #{creatorCode,jdbcType=VARCHAR},
      </if>
      <if test="gmtCreated != null" >
        #{gmtCreated,jdbcType=TIMESTAMP},
      </if>
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="modifierCode != null" >
        #{modifierCode,jdbcType=VARCHAR},
      </if>
      <if test="gmtModified != null" >
        #{gmtModified,jdbcType=TIMESTAMP},
      </if>
      <if test="nameCn != null" >
        #{nameCn,jdbcType=VARCHAR},
      </if>
      <if test="fullNameCn != null" >
        #{fullNameCn,jdbcType=VARCHAR},
      </if>
      <if test="nameEn != null" >
        #{nameEn,jdbcType=VARCHAR},
      </if>
      <if test="fullNameEn != null" >
        #{fullNameEn,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        #{status,jdbcType=INTEGER},
      </if>
      <if test="bak01 != null" >
        #{bak01,jdbcType=VARCHAR},
      </if>
      <if test="bak02 != null" >
        #{bak02,jdbcType=VARCHAR},
      </if>
      <if test="bak03 != null" >
        #{bak03,jdbcType=VARCHAR},
      </if>
      <if test="bak04 != null" >
        #{bak04,jdbcType=VARCHAR},
      </if>
      <if test="bak05 != null" >
        #{bak05,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="top.buukle.provider.security.entity.User" >
    update user
    <set >
      <if test="username != null and username != ' ' " >
        username = #{username,jdbcType=VARCHAR},
      </if>
      <if test="password != null and password != '' " >
        password = #{password,jdbcType=VARCHAR},
      </if>
      <if test="userId != null and userId != '' " >
        user_id = #{userId,jdbcType=VARCHAR},
      </if>
      <if test="fansNumber != null and fansNumber != '' " >
        fans_number = #{fansNumber,jdbcType=VARCHAR},
      </if>
      <if test="phone != null and phone != '' " >
        phone = #{phone,jdbcType=VARCHAR},
      </if>
      <if test="gender != null and gender != '' " >
        gender = #{gender,jdbcType=VARCHAR},
      </if>
      <if test="age != null and age != '' " >
        age = #{age,jdbcType=VARCHAR},
      </if>
      <if test="slogen != null and slogen != '' " >
        slogen = #{slogen,jdbcType=VARCHAR},
      </if>
      <if test="loginStrategy != null and loginStrategy != '' " >
        login_strategy = #{loginStrategy,jdbcType=INTEGER},
      </if>
      <if test="headImageUrl != null and headImageUrl != '' " >
        head_image_url = #{headImageUrl,jdbcType=VARCHAR},
      </if>
      <if test="headImageId != null and headImageId != '' " >
        head_image_id = #{headImageId,jdbcType=VARCHAR},
      </if>
      <if test="theme != null and theme != '' " >
        theme = #{theme,jdbcType=VARCHAR},
      </if>
      <if test="themeId != null and themeId != '' " >
        theme_id = #{themeId,jdbcType=INTEGER},
      </if>
      <if test="creator != null and creator != '' " >
        creator = #{creator,jdbcType=VARCHAR},
      </if>
      <if test="creatorCode != null " >
        creator_code = #{creatorCode,jdbcType=VARCHAR},
      </if>
      <if test="gmtCreated != null and gmtCreated != '' " >
        gmt_created = #{gmtCreated,jdbcType=TIMESTAMP},
      </if>
      <if test="modifier != null and modifier != '' " >
        modifier = #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="modifierCode != null and modifierCode != '' " >
        modifier_code = #{modifierCode,jdbcType=VARCHAR},
      </if>
      <if test="gmtModified != null " >
        gmt_modified = #{gmtModified,jdbcType=TIMESTAMP},
      </if>
      <if test="nameCn != null and nameCn != '' " >
        name_cn = #{nameCn,jdbcType=VARCHAR},
      </if>
      <if test="fullNameCn != null and fullNameCn != '' " >
        full_name_cn = #{fullNameCn,jdbcType=VARCHAR},
      </if>
      <if test="nameEn != null and nameEn != '' " >
        name_en = #{nameEn,jdbcType=VARCHAR},
      </if>
      <if test="fullNameEn != null and fullNameEn != '' " >
        full_name_en = #{fullNameEn,jdbcType=VARCHAR},
      </if>
      <if test="status != null " >
        status = #{status,jdbcType=INTEGER},
      </if>
      <if test="bak01 != null and bak01 != '' " >
        bak01 = #{bak01,jdbcType=VARCHAR},
      </if>
      <if test="bak02 != null and bak02 != '' " >
        bak02 = #{bak02,jdbcType=VARCHAR},
      </if>
      <if test="bak03 != null and bak03 != '' " >
        bak03 = #{bak03,jdbcType=VARCHAR},
      </if>
      <if test="bak04 != null and bak04 != '' " >
        bak04 = #{bak04,jdbcType=VARCHAR},
      </if>
      <if test="bak05 != null and  bak05 != '' " >
        bak05 = #{bak05,jdbcType=VARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="top.buukle.provider.security.entity.User" >
    update user
    set username = #{username,jdbcType=VARCHAR},
      password = #{password,jdbcType=VARCHAR},
      user_id = #{userId,jdbcType=VARCHAR},
      fans_number = #{fansNumber,jdbcType=VARCHAR},
      phone = #{phone,jdbcType=VARCHAR},
      gender = #{gender,jdbcType=VARCHAR},
      age = #{age,jdbcType=VARCHAR},
      slogen = #{slogen,jdbcType=VARCHAR},
      login_strategy = #{loginStrategy,jdbcType=INTEGER},
      head_image_url = #{headImageUrl,jdbcType=VARCHAR},
      head_image_id = #{headImageId,jdbcType=VARCHAR},
      theme = #{theme,jdbcType=VARCHAR},
      theme_id = #{themeId,jdbcType=INTEGER},
      creator = #{creator,jdbcType=VARCHAR},
      creator_code = #{creatorCode,jdbcType=VARCHAR},
      gmt_created = #{gmtCreated,jdbcType=TIMESTAMP},
      modifier = #{modifier,jdbcType=VARCHAR},
      modifier_code = #{modifierCode,jdbcType=VARCHAR},
      gmt_modified = #{gmtModified,jdbcType=TIMESTAMP},
      name_cn = #{nameCn,jdbcType=VARCHAR},
      full_name_cn = #{fullNameCn,jdbcType=VARCHAR},
      name_en = #{nameEn,jdbcType=VARCHAR},
      full_name_en = #{fullNameEn,jdbcType=VARCHAR},
      status = #{status,jdbcType=INTEGER},
      bak01 = #{bak01,jdbcType=VARCHAR},
      bak02 = #{bak02,jdbcType=VARCHAR},
      bak03 = #{bak03,jdbcType=VARCHAR},
      bak04 = #{bak04,jdbcType=VARCHAR},
      bak05 = #{bak05,jdbcType=VARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>

  <!--start -->
  <select id="getUserInfoForLogin" resultMap="BaseResultMap" parameterType="java.util.Map">
    select <include refid="Base_Column_List" /> from user where 1=1 and username=#{username} AND password = #{password}
  </select>

  <select id="getUserSubordinateByUserGroups" resultMap="BaseResultMap" parameterType="java.util.List">
    select u.* from user u ,user_group ug where
    u.status = 1
    <if test="groupsList != null and groupsList.size() > 0">
      and ug.group_id IN
      <foreach collection="#{groupsList}" item="group" separator="," open="(" close=")">
        #{group.id}
      </foreach>
    </if>
    and ug.type = 0
    and u.user_id = ug.user_id;
  </select>

  <select id="getUserList" resultMap="BaseResultMap" parameterType="java.util.Map">
    select <include refid="Base_Column_List_without_pwd" /> from user where 1=1
    <include refid="Base_Column_where" />
    <if test="startTime != null  and startTime !='' " >
      and gmt_created &gt;= #{startTime}
    </if>
    <if test="endTime != null  and endTime !='' " >
      and gmt_created &lt;= #{endTime}
    </if>
    order by gmt_modified DESC
  </select>

  <update id="doBanOrRelease" parameterType="java.util.Map" >
    update user
    set
      <include refid="Base_Column_Update" />
    where
      user.id = #{id}
  </update>

  <select id="getUserByModuleId" resultMap="BaseResultMap" parameterType="java.util.Map">
   SELECT DISTINCT
      u.`user_id`
    FROM
      USER u,
      user_role ur,
      role r,
      role_module rm,
      module m
    WHERE
      m.`id` = #{moduleId}
      AND rm.`module_id` = m.`id`
      AND rm.`role_id` = r.`id`
      AND r.`id` =  ur.`role_id`
      AND ur.`user_id` = u.`user_id`
  </select>

    <select id="getUserByRoleId" resultMap="BaseResultMap" parameterType="java.util.Map">
        SELECT DISTINCT
        u.`user_id`
        FROM
        USER u,
        user_role ur,
        role r
        WHERE
        r.`id` = #{roleId}
        AND ur.`role_id` =   r.`id`
        AND ur.`user_id` = u.`user_id`
    </select>

    <select id="getUserByGroupsId" resultMap="BaseResultMap" parameterType="java.util.Map">
        SELECT DISTINCT
        u.`user_id`
        FROM
        USER u,
        user_group ug,
        groups g
        WHERE
        g.`id` = #{groupsId}
        AND ug.group_id = g.`id`
        AND ug.`user_id` = u.`user_id`
    </select>
  <select id="fuzzySearchByName" resultMap="BaseResultMap" parameterType="java.lang.String">
    SELECT u.username FROM  user u WHERE u.username LIKE #{fuzzyText};
  </select>
</mapper>