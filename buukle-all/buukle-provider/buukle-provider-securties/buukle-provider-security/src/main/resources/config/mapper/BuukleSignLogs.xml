<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 不使用namespace的话sql搜索定位会比较方便 -->
<mapper namespace="top.buukle.provider.security.dao.BuukleSignLogsMapper">
	<!-- 定义结果集 -->
	<resultMap type="top.buukle.provider.security.entity.BuukleSignLogs" id="resultBuukleSignLogs">
		<id property="id" column="id" javaType="Integer"/>
		<result property="buukleSignId" column="buukle_sign_id" javaType="Integer"/>
		<result property="operationName" column="operation_name" javaType="String"/>
		<result property="operationCode" column="operation_code" javaType="String"/>
		<result property="operationType" column="operation_type" javaType="String"/>
		<result property="operationTime" column="operation_time" javaType="java.util.Date"/>
		<result property="logType" column="log_type" javaType="String"/>
		<result property="logMsg" column="log_msg" javaType="String"/>
	</resultMap>
	
	<sql id="Base_Column_insert">
        	#{buukleSignId,jdbcType=INTEGER},
        	#{operationName,jdbcType=VARCHAR},
        	#{operationCode,jdbcType=VARCHAR},
        	#{operationType,jdbcType=VARCHAR},
        	#{operationTime,jdbcType=TIMESTAMP},
        	#{logType,jdbcType=VARCHAR},
        	#{logMsg,jdbcType=VARCHAR}
	</sql>
	
	<sql id="Base_query_column">
		id,buukle_sign_id,operation_name,operation_code,operation_type,operation_time,log_type,log_msg
	</sql>
	
	<sql id="Base_query_where">
			 	<if test="id != null">
		          and id = #{id}
		         </if>
			 	<if test="buukleSignId != null">
		          and buukle_sign_id = #{buukleSignId}
		         </if>
			 	<if test="operationName != null and operationName != ''">
		          and operation_name = #{operationName}
		         </if>
			 	<if test="operationCode != null and operationCode != ''">
		          and operation_code = #{operationCode}
		         </if>
			 	<if test="operationType != null and operationType != ''">
		          and operation_type = #{operationType}
		         </if>
			 	<if test="operationTime != null">
		          and operation_time = #{operationTime}
		         </if>
			 	<if test="logType != null and logType != ''">
		          and log_type = #{logType}
		         </if>
			 	<if test="logMsg != null and logMsg != ''">
		          and log_msg = #{logMsg}
		         </if>
	</sql>
	
	<insert id="save" parameterType="top.buukle.provider.security.entity.BuukleSignLogs" useGeneratedKeys="true" keyProperty="id" >
        INSERT INTO buukle_sign_logs ( 
			buukle_sign_id,operation_name,operation_code,operation_type,operation_time,log_type,log_msg
		)
	    VALUES (
            <include refid="Base_Column_insert" /> 
        )
     	<selectKey resultType="int" keyProperty="id">
			SELECT LAST_INSERT_ID() AS id
		</selectKey>
	</insert>

	<update id="update" parameterType="top.buukle.provider.security.entity.BuukleSignLogs" flushCache="true">
        UPDATE buukle_sign_logs 
        <set>
   		        	<if test="buukleSignId!= null">
		        		buukle_sign_id = #{buukleSignId,jdbcType=INTEGER} ,
		        	</if>
		        	<if test="operationName!= null  and operationName != ''">
		        		operation_name = #{operationName,jdbcType=VARCHAR} ,
		        	</if>
		        	<if test="operationCode!= null  and operationCode != ''">
		        		operation_code = #{operationCode,jdbcType=VARCHAR} ,
		        	</if>
		        	<if test="operationType!= null  and operationType != ''">
		        		operation_type = #{operationType,jdbcType=VARCHAR} ,
		        	</if>
		        	<if test="operationTime!= null  and operationTime != ''">
		        		operation_time = #{operationTime,jdbcType=TIMESTAMP} ,
		        	</if>
		        	<if test="logType!= null  and logType != ''">
		        		log_type = #{logType,jdbcType=VARCHAR} ,
		        	</if>
		        	<if test="logMsg!= null  and logMsg != ''">
		        		log_msg = #{logMsg,jdbcType=VARCHAR} ,
		        	</if>
	       		 id = #{id,jdbcType=INTEGER} 
	      </set>
        WHERE 
	        id = #{id,jdbcType=INTEGER} 
	</update>   
	
	<delete id="delete" parameterType="string">
	    delete from buukle_sign_logs where id=#{id}
	</delete>
	
	<select id="getBuukleSignLogsByParas" resultMap="resultBuukleSignLogs" parameterType="java.util.Map">
		select <include refid="Base_query_column" /> from buukle_sign_logs where 1=1
		<include refid="Base_query_where" />
	</select>
	
	<select id="getBuukleSignLogsById" resultMap="resultBuukleSignLogs" parameterType="java.lang.Integer">
		select <include refid="Base_query_column" /> from buukle_sign_logs where id=#{id}
	</select>
</mapper>