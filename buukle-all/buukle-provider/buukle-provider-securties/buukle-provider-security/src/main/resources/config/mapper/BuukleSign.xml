<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 不使用namespace的话sql搜索定位会比较方便 -->
<mapper namespace="top.buukle.provider.security.dao.BuukleSignMapper">
	<!-- 定义结果集 -->
	<resultMap type="top.buukle.provider.security.entity.BuukleSign" id="resultBuukleSign">
		<id property="id" column="id" javaType="Integer"/>
		<result property="applicationName" column="application_name" javaType="String"/>
		<result property="partnerId" column="partner_id" javaType="String"/>
		<result property="partnerKey" column="partner_key" javaType="String"/>
		<result property="partnerType" column="partner_type" javaType="Integer"/>
		<result property="signType" column="sign_type" javaType="String"/>
		<result property="partnerKeyValid" column="partner_key_valid" javaType="java.util.Date"/>
		<result property="partnerKeyEndvalid" column="partner_key_endvalid" javaType="java.util.Date"/>
		<result property="status" column="status" javaType="Integer"/>
		<result property="creator" column="creator" javaType="String"/>
		<result property="creatorNo" column="creator_no" javaType="String"/>
		<result property="creatorType" column="creator_type" javaType="String"/>
		<result property="gmtCreated" column="gmt_created" javaType="java.util.Date"/>
		<result property="modifier" column="modifier" javaType="String"/>
		<result property="modifierNo" column="modifier_no" javaType="String"/>
		<result property="modifierType" column="modifier_type" javaType="String"/>
		<result property="gmtModified" column="gmt_modified" javaType="java.util.Date"/>
		<result property="remark" column="remark" javaType="String"/>
	</resultMap>
	
	<sql id="Base_Column_insert">
        	#{applicationName,jdbcType=VARCHAR},
        	#{partnerId,jdbcType=VARCHAR},
        	#{partnerKey,jdbcType=LONGVARCHAR},
        	#{partnerType,jdbcType=INTEGER},
        	#{signType,jdbcType=VARCHAR},
        	#{partnerKeyValid,jdbcType=TIMESTAMP},
        	#{partnerKeyEndvalid,jdbcType=TIMESTAMP},
        	#{status,jdbcType=INTEGER},
        	#{creator,jdbcType=VARCHAR},
        	#{creatorNo,jdbcType=VARCHAR},
        	#{creatorType,jdbcType=VARCHAR},
        	#{gmtCreated,jdbcType=TIMESTAMP},
        	#{modifier,jdbcType=VARCHAR},
        	#{modifierNo,jdbcType=VARCHAR},
        	#{modifierType,jdbcType=VARCHAR},
        	#{gmtModified,jdbcType=TIMESTAMP},
        	#{remark,jdbcType=VARCHAR}
	</sql>
	
	<sql id="Base_query_column">
		id,application_name,partner_id,partner_key,partner_type,sign_type,partner_key_valid,partner_key_endvalid,status,creator,creator_no,creator_type,gmt_created,modifier,modifier_no,modifier_type,gmt_modified,remark
	</sql>
	
	<sql id="Base_query_where">
			 	<if test="id != null">
		          and id = #{id}
		         </if>
			 	<if test="applicationName != null and applicationName != ''">
		          and application_name = #{applicationName}
		         </if>
			 	<if test="partnerId != null and partnerId != ''">
		          and partner_id = #{partnerId}
		         </if>
			 	<if test="partnerKey != null and partnerKey != ''">
		          and partner_key = #{partnerKey}
		         </if>
			 	<if test="partnerType != null">
		          and partner_type = #{partnerType}
		         </if>
			 	<if test="signType != null and signType != ''">
		          and sign_type = #{signType}
		         </if>
			 	<if test="partnerKeyValid != null">
		          and partner_key_valid = #{partnerKeyValid}
		         </if>
			 	<if test="partnerKeyEndvalid != null">
		          and partner_key_endvalid = #{partnerKeyEndvalid}
		         </if>
			 	<if test="status != null">
		          and status = #{status}
		         </if>
			 	<if test="creator != null and creator != ''">
		          and creator = #{creator}
		         </if>
			 	<if test="creatorNo != null and creatorNo != ''">
		          and creator_no = #{creatorNo}
		         </if>
			 	<if test="creatorType != null and creatorType != ''">
		          and creator_type = #{creatorType}
		         </if>
			 	<if test="gmtCreated != null">
		          and gmt_created = #{gmtCreated}
		         </if>
			 	<if test="modifier != null and modifier != ''">
		          and modifier = #{modifier}
		         </if>
			 	<if test="modifierNo != null and modifierNo != ''">
		          and modifier_no = #{modifierNo}
		         </if>
			 	<if test="modifierType != null and modifierType != ''">
		          and modifier_type = #{modifierType}
		         </if>
			 	<if test="gmtModified != null">
		          and gmt_modified = #{gmtModified}
		         </if>
			 	<if test="remark != null and remark != ''">
		          and remark = #{remark}
		         </if>
	</sql>
	
	<insert id="save" parameterType="top.buukle.provider.security.entity.BuukleSign" useGeneratedKeys="true" keyProperty="id" >
        INSERT INTO buukle_sign ( 
			application_name,partner_id,partner_key,partner_type,sign_type,partner_key_valid,partner_key_endvalid,status,creator,creator_no,creator_type,gmt_created,modifier,modifier_no,modifier_type,gmt_modified,remark
		)
	    VALUES (
            <include refid="Base_Column_insert" /> 
        )
     	<selectKey resultType="int" keyProperty="id">
			SELECT LAST_INSERT_ID() AS id
		</selectKey>
	</insert>

	<update id="update" parameterType="top.buukle.provider.security.entity.BuukleSign" flushCache="true">
        UPDATE buukle_sign 
        <set>
		        	<if test="applicationName!= null  and applicationName != ''">
		        		application_name = #{applicationName,jdbcType=VARCHAR} ,
		        	</if>
		        	<if test="partnerId!= null  and partnerId != ''">
		        		partner_id = #{partnerId,jdbcType=VARCHAR} ,
		        	</if>
		        	<if test="partnerKey!= null  and partnerKey != ''">
		        		partner_key = #{partnerKey,jdbcType=LONGVARCHAR} ,
		        	</if>
   		        	<if test="partnerType!= null">
		        		partner_type = #{partnerType,jdbcType=INTEGER} ,
		        	</if>
		        	<if test="signType!= null  and signType != ''">
		        		sign_type = #{signType,jdbcType=VARCHAR} ,
		        	</if>
		        	<if test="partnerKeyValid!= null  and partnerKeyValid != ''">
		        		partner_key_valid = #{partnerKeyValid,jdbcType=TIMESTAMP} ,
		        	</if>
		        	<if test="partnerKeyEndvalid!= null  and partnerKeyEndvalid != ''">
		        		partner_key_endvalid = #{partnerKeyEndvalid,jdbcType=TIMESTAMP} ,
		        	</if>
   		        	<if test="status!= null">
		        		status = #{status,jdbcType=INTEGER} ,
		        	</if>
		        	<if test="creator!= null  and creator != ''">
		        		creator = #{creator,jdbcType=VARCHAR} ,
		        	</if>
		        	<if test="creatorNo!= null  and creatorNo != ''">
		        		creator_no = #{creatorNo,jdbcType=VARCHAR} ,
		        	</if>
		        	<if test="creatorType!= null  and creatorType != ''">
		        		creator_type = #{creatorType,jdbcType=VARCHAR} ,
		        	</if>
		        	<if test="gmtCreated!= null  and gmtCreated != ''">
		        		gmt_created = #{gmtCreated,jdbcType=TIMESTAMP} ,
		        	</if>
		        	<if test="modifier!= null  and modifier != ''">
		        		modifier = #{modifier,jdbcType=VARCHAR} ,
		        	</if>
		        	<if test="modifierNo!= null  and modifierNo != ''">
		        		modifier_no = #{modifierNo,jdbcType=VARCHAR} ,
		        	</if>
		        	<if test="modifierType!= null  and modifierType != ''">
		        		modifier_type = #{modifierType,jdbcType=VARCHAR} ,
		        	</if>
		        	<if test="gmtModified!= null  and gmtModified != ''">
		        		gmt_modified = #{gmtModified,jdbcType=TIMESTAMP} ,
		        	</if>
		        	<if test="remark!= null  and remark != ''">
		        		remark = #{remark,jdbcType=VARCHAR} ,
		        	</if>
	       		 id = #{id,jdbcType=INTEGER} 
	      </set>
        WHERE 
	        id = #{id,jdbcType=INTEGER} 
	</update>   
	
	<delete id="delete" parameterType="string">
	    delete from buukle_sign where id=#{id}
	</delete>
	
	<select id="getBuukleSignByParas" resultMap="resultBuukleSign" parameterType="java.util.Map">
		select <include refid="Base_query_column" /> from buukle_sign where 1=1
		<include refid="Base_query_where" />
	</select>
	
	<select id="getBuukleSignById" resultMap="resultBuukleSign" parameterType="java.lang.Integer">
		select <include refid="Base_query_column" /> from buukle_sign where id=#{id}
	</select>
</mapper>